# Static用法

## 静态局部变量

1. 静态局部变量在程序执行到该对象的声明处时被首次初始化，即以后的函数调用不再进行初始化(局部变量每次函数调用都会被初始化)
2. 静态局部变量一般在声明处初始化，如果没有显式初始化，会被程序自动初始化为0(局部变量不会被初始化)
3. 它始终驻留在全局数据区，直到程序运行结束。但其作用域为局部作用域，也就是不能在函数体外面使用它(局部变量在栈区，在函数结束后立即释放内存);

```cpp
void foo() {
  static int i = 1;
  ++i;
  cout << i << " ";
}
foo();  // i==2
foo();  // i==3
```

## 静态全局变量

1. 定义在函数体外，用于修饰全局变量，表示该变量只在本文件可见（文件隔离）

```cpp
// a.cc
int n = 1;  // normal
static int n = 1;  // b.cc:(.text+0x6): undefined reference to `n'

// b.cc
extern int n;

int main() {
  cout << n << endl;
  return 0;
}
```

## 静态函数

1. 类似静态全局变量
2. 静态函数不能被其它文件所用
3. 其它文件中可以定义相同名字的函数，不会发生冲突

## 静态成员变量

1. 静态成员变量属于类，一个类的各个实例共享

## 静态成员函数

1. 静态成员函数不能访问非静态(包括成员函数和数据成员)，但是非静态可以访问静态
